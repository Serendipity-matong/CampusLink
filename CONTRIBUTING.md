# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ CampusLink é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ¤ å¦‚ä½•è´¡çŒ®

### æäº¤ Issue

åœ¨æäº¤ Issue å‰ï¼Œè¯·å…ˆæœç´¢æ˜¯å¦å·²æœ‰ç›¸å…³é—®é¢˜ã€‚åˆ›å»º Issue æ—¶ï¼Œè¯·æä¾›ï¼š

- æ¸…æ™°çš„æ ‡é¢˜
- è¯¦ç»†çš„é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤ï¼ˆå¦‚æœæ˜¯ Bugï¼‰
- æœŸæœ›çš„è¡Œä¸º
- å®é™…çš„è¡Œä¸º
- ç¯å¢ƒä¿¡æ¯ï¼ˆGo ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰

### æäº¤ Pull Request

1. **Fork é¡¹ç›®**

```bash
# åœ¨ GitHub ä¸Š Fork é¡¹ç›®
# ç„¶åå…‹éš†ä½ çš„ Fork
git clone https://github.com/YOUR_USERNAME/campuslink.git
cd campuslink
```

2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**

```bash
git checkout -b feature/your-feature-name
# æˆ–
git checkout -b fix/your-bug-fix
```

3. **è¿›è¡Œå¼€å‘**

éµå¾ªä¸‹é¢çš„ä»£ç è§„èŒƒè¿›è¡Œå¼€å‘ã€‚

4. **æäº¤ä»£ç **

```bash
git add .
git commit -m "[æ¨¡å—] ç®€çŸ­æè¿°"
```

æäº¤ä¿¡æ¯æ ¼å¼ï¼š
- `[auth] æ·»åŠ é‚®ç®±ç™»å½•åŠŸèƒ½`
- `[product] ä¿®å¤åº“å­˜æ‰£å‡é—®é¢˜`
- `[docs] æ›´æ–° API æ–‡æ¡£`
- `[test] æ·»åŠ è®¢å•æœåŠ¡å•å…ƒæµ‹è¯•`

5. **æ¨é€åˆ°è¿œç¨‹**

```bash
git push origin feature/your-feature-name
```

6. **åˆ›å»º Pull Request**

åœ¨ GitHub ä¸Šåˆ›å»º Pull Requestï¼Œå¹¶å¡«å†™ PR æ¨¡æ¿ã€‚

## ğŸ“ ä»£ç è§„èŒƒ

### Go ä»£ç è§„èŒƒ

éµå¾ª [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)

**åŸºæœ¬åŸåˆ™**ï¼š
- ä½¿ç”¨ `gofmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `golangci-lint` è¿›è¡Œä»£ç æ£€æŸ¥
- å˜é‡åä½¿ç”¨é©¼å³°å‘½åæ³•
- å¸¸é‡åä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- å¯¼å‡ºçš„å‡½æ•°ã€å˜é‡éœ€è¦æ·»åŠ æ³¨é‡Š
- å¤æ‚é€»è¾‘éœ€è¦æ·»åŠ æ³¨é‡Šè¯´æ˜

**ç¤ºä¾‹**ï¼š

```go
// GetUser æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·ä¿¡æ¯
// å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¿”å› ErrUserNotFound
func (uc *UserUsecase) GetUser(ctx context.Context, id uint) (*User, error) {
    user, err := uc.repo.GetUser(ctx, id)
    if err != nil {
        return nil, errors.ErrUserNotFound
    }
    return user, nil
}
```

### ç›®å½•ç»“æ„è§„èŒƒ

```
app/your-srv/
â”œâ”€â”€ cmd/server/          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ main.go
â”‚   â””â”€â”€ wire.go
â”œâ”€â”€ internal/            # å†…éƒ¨å®ç°
â”‚   â”œâ”€â”€ conf/            # é…ç½®å®šä¹‰
â”‚   â”œâ”€â”€ data/            # æ•°æ®å±‚ (PO, Repository å®ç°)
â”‚   â”œâ”€â”€ biz/             # ä¸šåŠ¡å±‚ (BO, Usecase)
â”‚   â”œâ”€â”€ service/         # æœåŠ¡å±‚ (DTO, gRPC å®ç°)
â”‚   â””â”€â”€ server/          # æœåŠ¡å™¨åˆå§‹åŒ–
â””â”€â”€ go.mod
```

### Git Commit è§„èŒƒ

**æ ¼å¼**ï¼š`[ç±»å‹] ç®€çŸ­æè¿°`

**ç±»å‹**ï¼š
- `[feat]`: æ–°åŠŸèƒ½
- `[fix]`: Bug ä¿®å¤
- `[docs]`: æ–‡æ¡£æ›´æ–°
- `[style]`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `[refactor]`: é‡æ„
- `[test]`: æµ‹è¯•ç›¸å…³
- `[chore]`: æ„å»º/å·¥å…·ç›¸å…³

**ç¤ºä¾‹**ï¼š
```
[feat][auth] æ·»åŠ å¾®ä¿¡ç™»å½•æ”¯æŒ
[fix][order] ä¿®å¤è®¢å•é‡‘é¢è®¡ç®—é”™è¯¯
[docs] æ›´æ–°å¿«é€Ÿå¼€å§‹æ–‡æ¡£
[refactor][product] ä¼˜åŒ–å•†å“æŸ¥è¯¢æ€§èƒ½
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•

æ¯ä¸ªä¸šåŠ¡é€»è¾‘å‡½æ•°éƒ½åº”è¯¥æœ‰å¯¹åº”çš„å•å…ƒæµ‹è¯•ï¼š

```go
// user_test.go
func TestUserUsecase_GetUser(t *testing.T) {
    // 1. å‡†å¤‡æµ‹è¯•æ•°æ®
    mockRepo := &MockUserRepo{
        users: map[uint]*User{
            1: {ID: 1, Username: "test"},
        },
    }
    
    uc := NewUserUsecase(mockRepo, log.DefaultLogger)
    
    // 2. æ‰§è¡Œæµ‹è¯•
    user, err := uc.GetUser(context.Background(), 1)
    
    // 3. éªŒè¯ç»“æœ
    assert.NoError(t, err)
    assert.Equal(t, "test", user.Username)
}
```

### é›†æˆæµ‹è¯•

å¯¹äºå¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œç¼–å†™é›†æˆæµ‹è¯•ï¼š

```go
func TestOrderFlow(t *testing.T) {
    // 1. åˆ›å»ºè®¢å•
    // 2. æ”¯ä»˜è®¢å•
    // 3. ç¡®è®¤æ”¶è´§
    // 4. è¯„ä»·è®¢å•
}
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
go test ./app/auth-srv/internal/biz/...

# æŸ¥çœ‹è¦†ç›–ç‡
make coverage
```

## ğŸ“‹ PR æ£€æŸ¥æ¸…å•

æäº¤ PR å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] ä»£ç å·²é€šè¿‡ `golangci-lint` æ£€æŸ¥
- [ ] æ‰€æœ‰æµ‹è¯•å·²é€šè¿‡
- [ ] æ–°åŠŸèƒ½å·²æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Commit ä¿¡æ¯ç¬¦åˆè§„èŒƒ
- [ ] ä»£ç å·²æ ¼å¼åŒ– (`gofmt`)
- [ ] æ²¡æœ‰é—ç•™çš„è°ƒè¯•ä»£ç ï¼ˆå¦‚ `fmt.Println`ï¼‰

## ğŸ” ä»£ç å®¡æŸ¥

### å®¡æŸ¥é‡ç‚¹

1. **åŠŸèƒ½æ­£ç¡®æ€§**ï¼šä»£ç æ˜¯å¦å®ç°äº†é¢„æœŸåŠŸèƒ½
2. **æ€§èƒ½**ï¼šæ˜¯å¦å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼ˆN+1 æŸ¥è¯¢ã€å†…å­˜æ³„æ¼ç­‰ï¼‰
3. **å®‰å…¨æ€§**ï¼šæ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´ï¼ˆSQL æ³¨å…¥ã€XSS ç­‰ï¼‰
4. **å¯ç»´æŠ¤æ€§**ï¼šä»£ç æ˜¯å¦æ˜“äºç†è§£å’Œç»´æŠ¤
5. **æµ‹è¯•è¦†ç›–**ï¼šæ˜¯å¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•è¦†ç›–

### å®¡æŸ¥æµç¨‹

1. è‡ªåŠ¨æ£€æŸ¥ï¼ˆCIï¼‰é€šè¿‡
2. è‡³å°‘ä¸€ä¸ªç»´æŠ¤è€…å®¡æŸ¥é€šè¿‡
3. æ‰€æœ‰è®¨è®ºå·²è§£å†³
4. åˆå¹¶åˆ°ä¸»åˆ†æ”¯

## ğŸ¨ æ–‡æ¡£è§„èŒƒ

### ä»£ç æ³¨é‡Š

```go
// Package biz åŒ…å«ä¸šåŠ¡é€»è¾‘å±‚çš„å®ç°
package biz

// UserUsecase ç”¨æˆ·ä¸šåŠ¡ç”¨ä¾‹
// è´Ÿè´£å¤„ç†ç”¨æˆ·ç›¸å…³çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
type UserUsecase struct {
    repo UserRepo
    log  *log.Helper
}

// GetUser æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·ä¿¡æ¯
// å‚æ•°:
//   - ctx: ä¸Šä¸‹æ–‡
//   - id: ç”¨æˆ·ID
// è¿”å›:
//   - *User: ç”¨æˆ·ä¿¡æ¯
//   - error: é”™è¯¯ä¿¡æ¯ï¼Œç”¨æˆ·ä¸å­˜åœ¨æ—¶è¿”å› ErrUserNotFound
func (uc *UserUsecase) GetUser(ctx context.Context, id uint) (*User, error) {
    // å®ç°...
}
```

### API æ–‡æ¡£

ä¿®æ”¹æˆ–æ–°å¢ API æ—¶ï¼Œè¯·æ›´æ–° `API_EXAMPLES.md`

## ğŸ› æŠ¥å‘Š Bug

å¥½çš„ Bug æŠ¥å‘Šåº”åŒ…å«ï¼š

1. **æ ‡é¢˜**ï¼šç®€çŸ­æè¿°é—®é¢˜
2. **ç¯å¢ƒ**ï¼šGo ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿã€æœåŠ¡ç‰ˆæœ¬
3. **å¤ç°æ­¥éª¤**ï¼šè¯¦ç»†çš„æ­¥éª¤
4. **æœŸæœ›è¡Œä¸º**ï¼šåº”è¯¥å‘ç”Ÿä»€ä¹ˆ
5. **å®é™…è¡Œä¸º**ï¼šå®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
6. **æ—¥å¿—/æˆªå›¾**ï¼šç›¸å…³æ—¥å¿—æˆ–æˆªå›¾

## ğŸ’¡ åŠŸèƒ½å»ºè®®

æå‡ºæ–°åŠŸèƒ½æ—¶ï¼Œè¯·è¯´æ˜ï¼š

1. **ä½¿ç”¨åœºæ™¯**ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½
2. **æœŸæœ›è¡Œä¸º**ï¼šåŠŸèƒ½åº”è¯¥å¦‚ä½•å·¥ä½œ
3. **æ›¿ä»£æ–¹æ¡ˆ**ï¼šæ˜¯å¦è€ƒè™‘è¿‡å…¶ä»–æ–¹æ¡ˆ
4. **å½±å“èŒƒå›´**ï¼šå¯¹ç°æœ‰åŠŸèƒ½çš„å½±å“

## ğŸ“ è”ç³»æˆ‘ä»¬

- **Email**: dev@campuslink.com
- **Issue**: https://github.com/campuslink/campuslink/issues
- **Discussions**: https://github.com/campuslink/campuslink/discussions

## ğŸ“œ è¡Œä¸ºå‡†åˆ™

- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- ä¿æŒå‹å¥½å’Œä¸“ä¸š
- æ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„
- å…³æ³¨å¯¹é¡¹ç›®æœ€æœ‰åˆ©çš„äº‹æƒ…

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º CampusLink åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ğŸ‰**


